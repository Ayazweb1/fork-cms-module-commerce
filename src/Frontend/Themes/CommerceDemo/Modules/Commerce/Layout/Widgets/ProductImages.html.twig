{#
    Product image slider with thumbnails.
    See js/components/carousel.ts and the vanilla-js Splide library
#}

{% if mediaItems %}
    <div class="js-carousel">
        <div class="js-product-slider splide">
            <div class="splide__track">
                <ul class="splide__list photoswipe-inner">
                    {% for mediaItem in mediaItems %}
                        <figure class="splide__slide | flex items-center justify-center"
                            itemprop="associatedMedia"
                            itemscope
                            itemtype="http://schema.org/ImageObject">
                            <a href="{{ mediaItem.getWebPath()|imagine_filter('product_large') }}"
                                itemprop="contentUrl"
                                data-size="{{ mediaItem.width }}x{{ mediaItem.height }}"
                                data-med="{{ mediaItem.getWebPath()|imagine_filter('product_large') }}"
                                data-caption="{{ mediaItem.title }}">
                                <img src="{{ mediaItem.getWebPath()|imagine_filter('product_thumbnail') }}"
                                    loading="lazy"
                                    itemprop="thumbnail"
                                    alt="{{ mediaItem.title }}"
                                    title="{{ mediaItem.title }}" />
                            </a>
                        </figure>
                    {% endfor %}
                </ul>
            </div>
        </div>

        {# Thumbnail slider #}
        <div class="my-6 js-product-slider-thumb splide">
            <div class="splide__track">
                <ul class="splide__list">
                    {% for mediaItem in mediaItems %}
                        <li class="splide__slide">
                            <img src="{{ mediaItem.getWebPath()|imagine_filter('product_slider_thumbnail') }}"
                                loading="lazy"
                                alt="{{ mediaItem.title }}"
                                title="{{ mediaItem.title }}" />
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
{% endif %}
